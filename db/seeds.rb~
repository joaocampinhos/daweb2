# This file should contain all the record creation needed to seed the database with its default values.
# The data can then be loaded with the rake db:seed (or created alongside the db with db:setup).
#
# Examples:
#
#   cities = City.create([{ name: 'Chicago' }, { name: 'Copenhagen' }])
#   Mayor.create(name: 'Emanuel', city: cities.first)

Empresa.delete_all
Departamento.delete_all
Empregado.delete_all

empresas = [
  {:name => "Gente Bonita", :spots => 1, :departamentos => [
    {:name => "Beleza", :empregados => [
      {:name => "Francisco", :email => "a@gmail.com", :password => "12345678", :password_confirmation => "12345678", :image => 1, :location => "almada", :job => "gerente", :about => "nao sei bem se e isto que e pa fazer ou se ta bem feito"},
      {:name => "Fanny", :email => "b@gmail.com", :password => "12345678", :password_confirmation => "12345678", :image => 2, :location => "casa dos segredos", :job => "socialite", :about => "eu merecia ganhar a casa dos segredos"}
    ]},
    {:name => "Gostosas", :empregados => [
      {:name => "Jennifer", :email => "c@gmail.com", :password => "12345678", :password_confirmation => "12345678", :image => 3, :location => "casa do xico", :about =>"espero que gostem do meu novo filme, hunger games 2"},
      {:name => "Katy", :email => "d@gmail.com", :password => "12345678", :password_confirmation => "12345678", :image => 4, :location => "casa do campinhos", :job => "modelo"}
    ]}
  ]},
  {:name => "MicroCenas", :spots => 3,  :departamentos => [
    {:name => "Canalização", :empregados => [
      {:name => "Manel", :email => "e@gmail.com", :password => "12345678", :password_confirmation => "12345678", :image => 5, :location => "usa", :job =>"canalizador", :about => "estou farto de ser canalizador, vou tentar um emprego na empresa gente bonita"}
    ]}
  ]}
]

##########
# Empresas, departamentos e empregados
empresas.each do |e|
  e_obj = Empresa.create(name: e[:name], spots: e[:spots])
  e[:departamentos].each do |d|
    d_obj = Departamento.create(name: d[:name], empresa_id: e_obj.id)
    d[:empregados].each do |emp|
      Empregado.create(name: emp[:name], email: emp[:email], password: emp[:password], password_confirmation: emp[:password_confirmation], departamento_id: d_obj.id, image: emp[:image], location: emp[:location], job: emp[:job], about: emp[:about])
    end
  end
end

##########
# Contactos entre os empregados
chicoid = Empregado.find_by(name: 'Francisco').id
Contacto.create(empregado_id: chicoid, amigo_id: Empregado.find_by(name: 'Fanny').id, pendente: false)
Contacto.create(empregado_id: chicoid, amigo_id: Empregado.find_by(name: 'Jennifer').id, pendente: false)
Contacto.create(empregado_id: chicoid, amigo_id: Empregado.find_by(name: 'Katy').id, pendente: true)

